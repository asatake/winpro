# #02 C言語の環境を整えよう編

C言語を学ぶ環境を整えます。  
あまり難しいことはないので、確実に設定しましょう。

#####今回導入するもの
- __gcc__
- __Atom__

エディタとコンパイラを導入します。  
コンパイラは、書いたプログラムを機械が読み取れるように翻訳するためのものです。  

###1.コンパイラの導入
まずはコンパイラを入れてみましょう。  
都合により2種類入れますが、好きな方を使ってください。

#### #gccの導入
まず一般的なC言語のコンパイラである、gccの導入です。  

Cygwinを開き、以下のどちらかのコマンドでgccの導入は完了です。
```
apt-cyg install gcc
または
choco install gcc
```
インストール確認ですが、以下のコマンドでバージョン情報が出たらOKです。
```
gcc --version
```


###2. エディタの導入
エディタは、今回Atomを導入します。  
Vimを使いたい人は、こちらをどうぞ。  
Vimもお勧めです。

__[>Cygwin使いのVim](vim_set/vim_beg.md)__

では、Atomを導入します。  

1. [Atom公式サイト](https://atom.io/)から、Downloadボタンを押してインストーラをダウンロードし、実行します。  
2. 勝手にインストールされます。
3. Cygwinを開き、次のコマンドを編集して入れてください。
```
git config user.name "自分の名前(英数字)"
git config user.email "自分のメールアドレス"
```

4. また、ホームディレクトリにある.zshrc、または.bashrcを開き、次の一文を入れてください。
```bash
alias atom='cmd /c atom'
```
これで起動しない場合は、Windowsの環境変数に次のパスを追加してみてください。
```bash
C:\Users\ユーザ名\AppData\Local\atom\bin
```
それでもだめなら、上に書いたaliasを次のように変更してください。
```bash
alias atom='cmd /c C:\Users\ユーザ名\AppData\Local\atom\bin'
```

5. Cygwinを再帰動し、「atom」と入力して起動してみましょう。  
(以後、Atomを起動するときはCygwinから起動してください。)

これで、とりあえずの環境は整いました。  
もっと使いやすくするために次のようなプラグインを入れるのもいいと思います。  
ただ、少しお重くなったりもするので、お好みで入れてください。

* linter
* linter clang
* autocomplete clang


###3. 実際の使い方
では実際の使い方を簡単な例で試してみましょう。

まず、Cygwinで適当なフォルダにcdコマンドで移動して、
```
$ atom test.c
```
と言った感じでCファイルを作成してatomで開きます。  
では、次のコードを書いて保存してみましょう。
```c
#include <stdio.h>

int main(){
  printf("hello, world!\n");
  return 0;
}
```
そしたらCygwinに戻り、次のコマンドを順番に打ちます。
```
$ gcc test.c -o test
$ ./test
```
これを打って、「hello, world!」と表示されたら成功です。

解説をすると、gccでは、-oの後に書いたファイル名の実行ファイルができます。  
-oオプションを入れないと、a.outというファイルができるので、  
./aとうつと実行できます。  
面倒な場合はこれでもいいでしょう。

次に、ファイルの簡易的な読み込みをやってみましょう。
次のCファイルを作成してみてください。
```c
// test2.c
#include <stdio.h>

int main(){
  int i;
  int num[15] = {0};

  for (i = 0; i < 10; i++) {
    scanf("%d", &num[i]);
  }

  printf("num: ");
  for (i = 0; i < 10; i++) {
    printf("%d ", num[i]);
  }
  printf("\n");
  return 0;
}
```
さらに、次のファイル(ここでは名前をfiboとします)を作成してください。  
拡張子は付けなくていいです。
```
1 1 2 3 5 8 13 21 34 55 89
```
ではCygwinで次のように打ってください。
```
$ gcc test2.c -o test2
$ ./test2 < fibo
```
すると、さきほど作ったファイルの「55」までが表示されたかと思います。  
何をしたかというと、test2に対してfiboを読み込ませることで、  
scanfでの入力をfiboに書いてある内容にし、入力を簡易化したのです。  
とても便利なテクニックなので、覚えておくといいでしょう。  
試しに、さっきのCコードのループ回数(forの中身の数字)を10から11に変えてみましょう。  
すると、89まで表示されました。これでなんとなくわかりましたかね？
